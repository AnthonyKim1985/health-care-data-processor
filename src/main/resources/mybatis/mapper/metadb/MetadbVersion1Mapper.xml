<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="org.bigdatacenter.dataprocessor.platform.persistence.metadb.version1.MetadbVersion1Mapper">
    <!-- RequestInfo findRequest(@Param("dataSetUID") Integer dataSetUID) -->
    <select id="readRequest" resultType="org.bigdatacenter.dataprocessor.platform.domain.metadb.version1.request.RequestInfo">
        SELECT * FROM health_care_ui.bogun_dataset_list WHERE dataSetUID = #{dataSetUID};
    </select>

    <!-- List<FilterInfoInfo> findConditions(@Param("dataSetUID") Integer dataSetUID) -->
    <select id="readConditions" resultType="org.bigdatacenter.dataprocessor.platform.domain.metadb.version1.request.RequestFilterInfo">
        SELECT * FROM health_care_ui.bogun_dataset_select WHERE dataSetUID = #{dataSetUID};
    </select>

    <!-- List<MetaColumnInfoInfo> findColumnInfo(@Param("eclEngName") String eclEngName) -->
    <select id="readColumnInfo" resultType="org.bigdatacenter.dataprocessor.platform.domain.metadb.version1.meta.MetaColumnInfo">
        SELECT * FROM health_care_ui.extract_col_list WHERE ecl_eng_name = #{eclEngName};
    </select>

    <!-- MetaTableInfoInfo findTableInfo(@Param("etlIdx") Integer etlIdx) -->
    <select id="readTableInfo" resultType="org.bigdatacenter.dataprocessor.platform.domain.metadb.version1.meta.MetaTableInfo">
        SELECT * FROM health_care_ui.extract_tb_list WHERE etl_idx = #{etlIdx};
    </select>

    <!-- MetaDatabaseInfoInfo findDatabaseInfo(@Param("edlIdx") Integer edlIdx) -->
    <select id="readDatabaseInfo" resultType="org.bigdatacenter.dataprocessor.platform.domain.metadb.version1.meta.MetaDatabaseInfo">
        SELECT * FROM health_care_ui.extract_db_list WHERE edl_idx = #{edlIdx};
    </select>

    <!-- void createFtpRequest(@Param("ftpInfo") FtpInfo ftpInfo) -->
    <insert id="createFtpRequest" parameterType="org.bigdatacenter.dataprocessor.platform.domain.metadb.common.FtpInfo">
        INSERT INTO health_care_ui.ftp_request_meta (dataSetUID, userID, ftpURI)
        VALUES (#{ftpInfo.dataSetUID}, #{ftpInfo.userID}, #{ftpInfo.ftpURI});
    </insert>

    <!-- FtpInfo readFtpRequest(@Param("dataSetUID") Integer dataSetUID) -->
    <select id="readFtpRequest" resultType="org.bigdatacenter.dataprocessor.platform.domain.metadb.common.FtpInfo">
        SELECT * FROM health_care_ui.ftp_request_meta WHERE dataSetUID = #{dataSetUID};
    </select>
</mapper>